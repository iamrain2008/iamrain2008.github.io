<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="黄雨霏的博客，主要聊聊算法、Android、Java、Javascript、Vue、React等内容">
    <meta name="keyword"  content="">
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>
        
        二分查找法从入门到精通 - 黄雨霏的博客，主要聊聊算法、Android、Java、Javascript、Vue、React等内容
        
    </title>

    <!-- Custom CSS -->
    
<link rel="stylesheet" href="/css/aircloud.css">

    
<link rel="stylesheet" href="/css/gitment.css">

    <!--<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">-->
    <link href="//at.alicdn.com/t/font_620856_pl6z7sid89qkt9.css" rel="stylesheet" type="text/css">
    <!-- ga & ba script hoook -->
    <script></script>
<meta name="generator" content="Hexo 4.2.0"></head>

<body>

<div class="site-nav-toggle" id="site-nav-toggle">
    <button>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
    </button>
</div>

<div class="index-about">
    <i> Nothing is impossible to a willing heart </i>
</div>

<div class="index-container">
    
    <div class="index-left">
        
<div class="nav" id="nav">
    <div class="avatar-name">
        <div class="avatar radius">
            <img src="/img/avatar.jpg" />
        </div>
        <div class="name">
            <i>黄雨霏</i>
        </div>
    </div>
    <div class="contents" id="nav-content">
        <ul>
            <li >
                <a href="/">
                    <i class="iconfont icon-shouye1"></i>
                    <span>主页</span>
                </a>
            </li>
            <li >
                <a href="/tags">
                    <i class="iconfont icon-biaoqian1"></i>
                    <span>标签</span>
                </a>
            </li>
            <li >
                <a href="/archives">
                    <i class="iconfont icon-guidang2"></i>
                    <span>存档</span>
                </a>
            </li>
            <li >
                <a href="/about/">
                    <i class="iconfont icon-guanyu2"></i>
                    <span>关于</span>
                </a>
            </li>
            
            <li>
                <a id="search">
                    <i class="iconfont icon-sousuo1"></i>
                    <span>搜索</span>
                </a>
            </li>
            
        </ul>
    </div>
    
        <div id="toc" class="toc-article">
    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#二分法的本质"><span class="toc-text">二分法的本质</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#二分法的痛点"><span class="toc-text">二分法的痛点</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#二分法的基本写法"><span class="toc-text">二分法的基本写法</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#二分法常见模板"><span class="toc-text">二分法常见模板</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#模板1"><span class="toc-text">模板1</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#模板2"><span class="toc-text">模板2</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#模板3"><span class="toc-text">模板3</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#模板的选择"><span class="toc-text">模板的选择</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#模板1-案例"><span class="toc-text">模板1 案例</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#模板2-案例"><span class="toc-text">模板2 案例</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#模板3-案例"><span class="toc-text">模板3 案例</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#总结"><span class="toc-text">总结</span></a></li></ol>
</div>
    
</div>


<div class="search-field" id="search-field">
    <div class="search-container">
        <div class="search-input">
            <span id="esc-search"> <i class="icon-fanhui iconfont"></i></span>
            <input id="search-input"/>
            <span id="begin-search">搜索</span>
        </div>
        <div class="search-result-container" id="search-result-container">

        </div>
    </div>
</div>

        <div class="index-about-mobile">
            <i> Nothing is impossible to a willing heart </i>
        </div>
    </div>
    
    <div class="index-middle">
        <!-- Main Content -->
        


<div class="post-container">
    <div class="post-title">
        二分查找法从入门到精通
    </div>

    <div class="post-meta">
        <span class="attr">发布于：<span>2020-02-07 16:05:03</span></span>
        
        <span class="attr">标签：/
        
        <a class="tag" href="/tags/#binary search" title="binary search">binary search</a>
        <span>/</span>
        
        <a class="tag" href="/tags/#algorithm" title="algorithm">algorithm</a>
        <span>/</span>
        
        <a class="tag" href="/tags/#leetcode" title="leetcode">leetcode</a>
        <span>/</span>
        
        
        </span>
        <span class="attr">访问：<span id="busuanzi_value_page_pv"></span>
</span>
</span>
    </div>
    <div class="post-content no-indent">
        <h1 id="二分法的本质"><a href="#二分法的本质" class="headerlink" title="二分法的本质"></a>二分法的本质</h1><p>二分法通常用于在有序的集合中查找目标。通过O(1)的操作，将规模为<code>n</code>的问题分解为<code>n/2</code>，最终时间复杂度是<code>log(n)</code>。通常要求做到<code>log(n)</code>的时间复杂度，基本上都是二分法。</p>
<h1 id="二分法的痛点"><a href="#二分法的痛点" class="headerlink" title="二分法的痛点"></a>二分法的痛点</h1><ul>
<li>死循环<ul>
<li>二分法通过<code>循环条件</code>+<code>指针变化</code>来推进，如果这两个组合不正确，就会导致死循环。</li>
</ul>
</li>
<li>是否可以使用递归(Recursion)<ul>
<li>使用递归时，代码会更加清晰，写法更简单。不能用递归时，写法会复杂很多。有时候需要注意问题规模，使用递归是否可能导致溢出。</li>
</ul>
</li>
</ul>
<h1 id="二分法的基本写法"><a href="#二分法的基本写法" class="headerlink" title="二分法的基本写法"></a>二分法的基本写法</h1><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="built_in">int</span> binarySearch(<span class="built_in">int</span>[] nums, <span class="built_in">int</span> target) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 对数据合法性进行判断</span></span><br><span class="line">    <span class="built_in">int</span> badResult = <span class="number">-1</span>;     <span class="comment">// 表示没有target或nums不合法的数字，例如-1</span></span><br><span class="line">    <span class="keyword">if</span> (nums不合法) &#123;</span><br><span class="line">        <span class="keyword">return</span> badResult;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 设定左右指针</span></span><br><span class="line">    <span class="built_in">int</span> left = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">int</span> right = nums.length - <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 开始循环</span></span><br><span class="line">    <span class="keyword">while</span> (循环条件) &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 设定mid，这里的小技巧是使用右减左除以2再加上左，避免溢出，更好的写法是相加后无符号右移一位</span></span><br><span class="line">        <span class="built_in">int</span> mid = (right + left) &gt;&gt;&gt; <span class="number">1</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 判断mid是否是所求目标，是的话返回</span></span><br><span class="line">        <span class="keyword">if</span> (nums[mid] == target) &#123;</span><br><span class="line">            <span class="keyword">return</span> mid;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 不是的话，判断移动左还是右指针，将问题规模减小一半</span></span><br><span class="line">        <span class="keyword">if</span> (target在左侧) &#123;</span><br><span class="line">            移动右指针</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            移动左指针</span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 视上述循环条件和移动指针的方式，执行额外的最终判断</span></span><br><span class="line">    最终判断</span><br><span class="line">    <span class="comment">// 如果最终没有满足条件的结果，返回失败</span></span><br><span class="line">    <span class="keyword">return</span> badResult;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>总结一下就是通过循环，不停的移动左右指针将问题规模减半，直到解决问题。</p>
<p>这里的难点是<code>循环条件</code>和<code>移动左右指针的方法</code>，这两者使用不同的组合会有不同的效果，使用错了会导致死循环。下面我介绍一些常见的循环条件和移动左右指针的方法的组合。</p>
<h1 id="二分法常见模板"><a href="#二分法常见模板" class="headerlink" title="二分法常见模板"></a>二分法常见模板</h1><p>基本上所有的二分查找算法都可以用下面3种模板之一来解决。</p>
<h2 id="模板1"><a href="#模板1" class="headerlink" title="模板1"></a>模板1</h2><table>
<thead>
<tr>
<th>项目</th>
<th>代码</th>
</tr>
</thead>
<tbody><tr>
<td>左指针</td>
<td>left = 0</td>
</tr>
<tr>
<td>右指针</td>
<td>right = length - 1</td>
</tr>
<tr>
<td>循环条件</td>
<td>left &lt;= right</td>
</tr>
<tr>
<td>左指针移动</td>
<td>left = mid + 1</td>
</tr>
<tr>
<td>右指针移动</td>
<td>right = mid - 1</td>
</tr>
<tr>
<td>最终判断</td>
<td>无</td>
</tr>
</tbody></table>
<p>这个模板在退出循环时，left与right会交错而过(即left - 1 == right)，此时所有可能项目都查找过了，所以不需要额外的操作。</p>
<h2 id="模板2"><a href="#模板2" class="headerlink" title="模板2"></a>模板2</h2><table>
<thead>
<tr>
<th>项目</th>
<th>代码</th>
</tr>
</thead>
<tbody><tr>
<td>左指针</td>
<td>left = 0</td>
</tr>
<tr>
<td>右指针</td>
<td>right = length</td>
</tr>
<tr>
<td>循环条件</td>
<td>left &lt; right</td>
</tr>
<tr>
<td>左指针移动</td>
<td>left = mid + 1</td>
</tr>
<tr>
<td>右指针移动</td>
<td>right = mid</td>
</tr>
<tr>
<td>最终判断</td>
<td>left是否是target？</td>
</tr>
</tbody></table>
<p>模板2的right初始值需要注意一下，是length，这是为了配合left &lt; right这个循环条件。</p>
<p>这个模板在退出循环的时候，一定有left == right，此时因为不满足循环条件，所以这个值还没有判断过，于是在退出循环之后，还需要判断一次left是否是target（判断right也行，因为退出循环时left必然等于right）。</p>
<h2 id="模板3"><a href="#模板3" class="headerlink" title="模板3"></a>模板3</h2><table>
<thead>
<tr>
<th>项目</th>
<th>代码</th>
</tr>
</thead>
<tbody><tr>
<td>左指针</td>
<td>left = 0</td>
</tr>
<tr>
<td>右指针</td>
<td>right = length - 1</td>
</tr>
<tr>
<td>循环条件</td>
<td>left + 1 &lt; right</td>
</tr>
<tr>
<td>左指针移动</td>
<td>left = mid</td>
</tr>
<tr>
<td>右指针移动</td>
<td>right = mid</td>
</tr>
<tr>
<td>最终判断</td>
<td>left是否是target？right是否是target？</td>
</tr>
</tbody></table>
<p>模板3在退出循环的时候，left + 1 == right，也就是查找到了最后2个项目，这两个项目没有在循环中判断过，所以最终判断时需要分别看一下left和right是否是target</p>
<h1 id="模板的选择"><a href="#模板的选择" class="headerlink" title="模板的选择"></a>模板的选择</h1><p>上面介绍了3种模板，他们的核心区别是</p>
<table>
<thead>
<tr>
<th><div style="width: 80px">项目</div></th>
<th><div style="width: 33%">模板1</div></th>
<th><div style="width: 33%">模板2</div></th>
<th><div style="width: 33%">模板3</div></th>
</tr>
</thead>
<tbody><tr>
<td>左指针</td>
<td>left = 0</td>
<td>left = 0</td>
<td>left = 0</td>
</tr>
<tr>
<td>右指针</td>
<td>right = length - 1</td>
<td>right = length</td>
<td>right = length - 1</td>
</tr>
<tr>
<td>循环条件</td>
<td>left &lt;= right</td>
<td>left &lt; right</td>
<td>left + 1 &lt; right</td>
</tr>
<tr>
<td>左指针移动</td>
<td>left = mid + 1</td>
<td>left = mid + 1</td>
<td>left = mid</td>
</tr>
<tr>
<td>右指针移动</td>
<td>right = mid - 1</td>
<td>right = mid</td>
<td>right = mid</td>
</tr>
<tr>
<td>最终判断</td>
<td>无</td>
<td>left是否在界限内，是不是target？</td>
<td>left是否是target？right是不是target？</td>
</tr>
<tr>
<td>核心区别</td>
<td>便于解决只需要通过元素本身就能判断是否为目标的问题</td>
<td>便于解决需要元素本身及邻居来判断是否为目标的问题</td>
<td>模板1、2的加强版，万能模板</td>
</tr>
</tbody></table>
<h2 id="模板1-案例"><a href="#模板1-案例" class="headerlink" title="模板1 案例"></a>模板1 案例</h2><p>只要通过元素本身即可判断是否为目标的问题，用模板1会很方便。</p>
<ul>
<li><a href="https://leetcode.com/problems/binary-search/" target="_blank" rel="noopener">LeetCode 704. Binary Search</a><blockquote>
<p>经典二分查找法</p>
</blockquote>
</li>
</ul>
<h2 id="模板2-案例"><a href="#模板2-案例" class="headerlink" title="模板2 案例"></a>模板2 案例</h2><p>不仅要靠元素本身，还需要邻居才能判断是否为目标，用模板2更方便。</p>
<ul>
<li><a href="https://leetcode.com/problems/first-bad-version/" target="_blank" rel="noopener">LeetCode 278. First Bad Version</a> <blockquote>
<p>处理<code>AA...AABB...BB</code>类型的问题，找出最后一个A或者第一个B。</p>
</blockquote>
</li>
<li><a href="https://leetcode.com/problems/find-first-and-last-position-of-element-in-sorted-array/" target="_blank" rel="noopener">LeetCode 34. Find First and Last Position of Element in Sorted Array</a><blockquote>
<p>处理<code>AABBCCDD</code>类型的问题，找出B的开始和结束。</p>
</blockquote>
</li>
<li><a href="https://leetcode.com/problems/find-peak-element/" target="_blank" rel="noopener">LeetCode 162. Find Peak Element</a><blockquote>
<p>处理山峰的问题，非常典型。需要通过元素和邻居来判断指针如何移动。</p>
</blockquote>
</li>
</ul>
<h2 id="模板3-案例"><a href="#模板3-案例" class="headerlink" title="模板3 案例"></a>模板3 案例</h2><p>模板3是模板1、2的加强版，是一个万能二分法模板，基本上所有的二分法问题都能解决。<br>有时候我们用模板2去做一些<code>AABB</code>类型的题目时，会碰到死循环，原因是左右中位数选择的问题，这个时候需要将mid换成右中位数( mid = right + left + 1 &gt;&gt;&gt; 1; )，不熟练的话，你都不知道自己为什么死循环了。<br>但我们用模板3，则简单无脑，所以你可以所有二分法都用模板3，反正肯定不会出错就是了。</p>
<ul>
<li><a href="https://www.lintcode.com/problem/wood-cut/description" target="_blank" rel="noopener">LintCode 183. Wood Cut</a><blockquote>
<p>这个例子如果用模板2，需要搞清楚用左右中位数的哪个，否则容易死循环，用模板3则轻松愉快。</p>
</blockquote>
</li>
</ul>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>模板1到模板3是一个进化的关系，目的就是为了更方便的解决问题，不让自己陷入死循环。通常能用模板1解决的问题，都能用模板2解决；能用模板2解决的问题，都能用模板3解决。而且模板3是最不容易出错的写法。<br>所以你可以只记住模板3的写法，它基本上能解决所有二分法问题。</p>

        
        <br />
        <div id="comment-container">
        </div>
        <div id="disqus_thread"></div>

        <div id="lv-container">
        </div>

    </div>
</div>

    </div>
</div>


<footer class="footer">
    <ul class="list-inline text-center">
        
        

        

        

        
        <li>
            <a target="_blank"  href="https://github.com/iamrain2008">
                            <span class="fa-stack fa-lg">
                                <i class="iconfont icon-github"></i>
                            </span>
            </a>
        </li>
        

        
        <li>
            <a target="_blank"  href="https://www.linkedin.com/in/yufei-huang-13750993">
                            <span class="fa-stack fa-lg">
                                <i class="iconfont icon-linkedin"></i>
                            </span>
            </a>
        </li>
        

    </ul>
    
    <p>
        <span>/</span>
        <span>雨霏的朋友们</span>
        <span>:</span>
        
        <span><a href="https://hakuless.github.io/" target="_blank" rel="noopener">HakuLess</a></span>
        <span>/</span>
        
        <span><a href="https://kyangc.com/" target="_blank" rel="noopener">阿阳的自留地</a></span>
        <span>/</span>
        
    </p>
    
    <p>
        <span id="busuanzi_container_site_pv">
            <span id="busuanzi_value_site_pv"></span>PV
        </span>
        <span id="busuanzi_container_site_uv">
            <span id="busuanzi_value_site_uv"></span>UV
        </span>
        Created By <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>  Theme <a href="https://github.com/aircloud/hexo-theme-aircloud" target="_blank" rel="noopener">AirCloud</a></p>
</footer>




</body>

<script>
    // We expose some of the variables needed by the front end
    window.hexo_search_path = "search.json"
    window.hexo_root = "/"
    window.isPost = true
</script>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>

<script src="/js/index.js"></script>

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




</html>
